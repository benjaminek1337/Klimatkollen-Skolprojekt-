@model Klimatkollen.Models.Observation

@{
    ViewData["Title"] = "ReportObservationStep1";
}

<h1>Välj kategori</h1>
<div id="catDiv">
    @foreach (var item in ViewBag.categories)
    {
        <button class="buttonTemp" value=@item>@item</button>
    }
</div>





@using (Html.BeginForm("ReportObservation_step2", "ReportObservation", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

        <div style="visibility: hidden">
            
            <div class="form-group">
                <div class="col-md-10">
                    @Html.EditorFor(model => model.CategoryTemp, new { htmlAttributes = new { @class = "form-control btnResult" } })
                </div>
            </div>
        </div>

        <div class="form-group">
            <input type="submit" value="Nästa steg" class="btn btn-primary" />
        </div>
    </div>
}
<div id="result"></div>




<script>
    // Function för att sätta aktic class på den klickade knappen
    var header = document.getElementById("catDiv");
    var btns = header.getElementsByClassName("buttonTemp");
    for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", function () {
            var current = document.getElementsByClassName("active");
            if (current.length > 0) {
                current[0].className = current[0].className.replace(" active", "");
            }
            this.className += " active";
            SetValue();
        });
    }

</script>



<script>
    //Sätter värdet på den klickade knappen till en textbox för objektets "category"
    function SetValue() {
        var x = document.getElementsByClassName("active");
        var z = document.getElementsByClassName("btnResult");

        document.getElementById("result").innerHTML = x[0].value;
        z[0].value = x[0].value;
    }
</script>

